AArch64 FOW

Stable=X9

(* 0x14000000 = B +0 *)

{
0:X4=P1:L4;  0:X1=0x14000001; 0:X2=0x14000003; 0:X3=0x14000005;
0:X6=x;
1:X6=x;
2:X5=P1:L4; 2:X6=x;
3:X5=P1:L4; 3:X6=x;
}
 P0            | P1          | P2          | P3          ;
  STR W1,[X4]  | MOV W9,#0   | LC02:       | LC03:       ;
  STR W2,[X4]  | LC01:       | LDR W1,[X6] | LDR W1,[X6] ;
  STR W3,[X4]  | LDR W1,[X6] | CBZ W1,LC02 | CBZ W1,LC03 ;
  DSB ISH      | CBZ W1,LC01 | ISB         | ISB         ;
  IC IVAU,X4   | ISB         | BLR X5      | BLR X5      ;
  DSB ISH      | BL L4       |             |             ;
  MOV W5,#1    | B Lout      |             |             ;
  STR W5,[X6]  | L4:         |             |             ;
               | B Lfail1    |             |             ;
               | MOV W9,#0   |             |             ;
               | RET         |             |             ;
               | Lfail1:     |             |             ;
               | MOV W9,#1   |             |             ;
               | RET         |             |             ;
               | Lfail2:     |             |             ;
               | MOV W9,#2   |             |             ;
               | RET         |             |             ;
               | Lout:       |             |             ;

exists (1:X9=0 /\ 2:X9=1 /\ 3:X9=2)
       \/ (1:X9=0 /\ 2:X9=2 /\ 3:X9=1)
       \/ (1:X9=1 /\ 2:X9=2 /\ 3:X9=0)
       \/ (1:X9=1 /\ 2:X9=0 /\ 3:X9=2)
       \/ (1:X9=2 /\ 2:X9=0 /\ 3:X9=1)
       \/ (1:X9=2 /\ 2:X9=1 /\ 3:X9=0)
